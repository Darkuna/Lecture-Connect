<div class="context">
  <p-toolbar>
    <div class="p-toolbar-group-start">
      {{nrOfEvents}} of {{maxEvents}} Courses are assigned
    </div>

    <div class="p-toolbar-group-center">
      <p-dropdown id="all"
                  scrollHeight="300px"
                  placeholder="select room" optionLabel="roomId" filterBy="id"
                  [filter]="true"
                  [showClear]="false"
                  [options]="availableRooms" [ngModel]="selectedRoom"
                  (onChange)="loadNewRoom($event.value)">
        <ng-template let-item pTemplate="item">
          <div class="flex align-items-center gap-2">
            <div>{{ item.roomId }}</div>
          </div>
        </ng-template>
      </p-dropdown>
    </div>

    <div class="p-toolbar-group-end">
      <p-dropdown [style]="{'margin-right': '.5rem', 'width': '28rem'}"
                  optionLabel="title"
                  [showClear]="true"
                  [filter]="true"
                  [options]="getCalendarEvents()"
                  [(ngModel)]="firstSearchedEvent"
                  (ngModelChange)="changeRoom($event)"
                  placeholder="Search for a Course">
        <ng-template pTemplate="selectedItem" let-selectedOption>
          <div class="flex align-items-center gap-2">
            <div>{{ selectedOption.title }}</div>
          </div>
        </ng-template>
        <ng-template let-course pTemplate="item">
          <div class="flex align-items-center gap-2">
            <div>{{ course.title }} | {{ course.description }}</div>
          </div>
        </ng-template>
      </p-dropdown>
      <p-button label='finished' (onClick)="saveAndGoHome()" [style]="{'margin-right':'5rem'}"/>
    </div>
  </p-toolbar>
  <div class="col-left" style="width: 85%">
    <div id="calendarScroll">
      <full-calendar #calendar id="calendarID"
                     [options]='destCalendarOptions'
                     [events]="combinedTableEvents"/>
    </div>
  </div>

  <div class="col-left" #external id="external-events"
       style="width: 15%; position: fixed; padding: 5px; height:90%">
    <div *ngFor="let event of dragTableEvents" class="fc-event"
         [attr.data-id]="event['id']"
         [attr.data-title]="event['title']"
         [attr.data-duration]="event.extendedProps?.['duration']">
      {{ event['title'] }}
    </div>
  </div>
</div>

<p-contextMenu [model]="items" [global]="true" (onShow)="getItemMenuOptions()"/>
